(()=>{var t={453:(t,e,i)=>{const s=i(95);function r(){this.map=(new THREE.TextureLoader).load("assets/images/"+s.meta.image)}r.prototype={getUVConverters:function(t){return t?(t=t.replace("brushes/",""),{convertU:function(e){var i=s.meta.size,r=s.frames[t];return(e>1||e<0)&&(e=0),r.frame.x/i.w+e*r.frame.w/i.w},convertV:function(e){var i=s.meta.size,r=s.frames[t];return(e>1||e<0)&&(e=0),1-(r.frame.y/i.h+e*r.frame.h/i.h)}}):{convertU:function(t){return t},convertV:function(t){return t}}}},window.atlas=new r},967:()=>{window.BinaryManager=function(t){this.dataview=new DataView(t),this.offset=0,this.isLittleEndian=!0},window.BinaryManager.prototype={readQuaternion:function(){return new THREE.Quaternion(this.readFloat(),this.readFloat(),this.readFloat(),this.readFloat())},readVector3:function(){return new THREE.Vector3(this.readFloat(),this.readFloat(),this.readFloat())},readString:function(){for(var t=this.dataview.getUint8(this.offset++,!0),e="",i=0;i<t;i++)e+=String.fromCharCode(this.dataview.getUint8(this.offset++,!0));return e},readColor:function(){return new THREE.Color(this.readFloat(),this.readFloat(),this.readFloat())},readFloat:function(){var t=this.dataview.getFloat32(this.offset,!0);return this.offset+=4,t},readUint32:function(){var t=this.dataview.getUint32(this.offset,!0);return this.offset+=4,t},readUint16:function(){var t=this.dataview.getUint16(this.offset,!0);return this.offset+=2,t},readUint8:function(){var t=this.dataview.getUint8(this.offset,!0);return this.offset++,t},writeVector:function(t){this.writeFloat32Array(t.toArray())},writeColor:function(t){this.writeFloat32Array(t.toArray())},writeString:function(t){this.writeUint8(t.length);for(var e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e))},writeUint8:function(t){this.dataview.setUint8(this.offset,t,this.isLittleEndian),this.offset++},writeUint16:function(t){this.dataview.setUint16(this.offset,t,this.isLittleEndian),this.offset+=2},writeUint32:function(t){this.dataview.setUint32(this.offset,t,this.isLittleEndian),this.offset+=4},writeFloat32:function(t){this.dataview.setFloat32(this.offset,t,this.isLittleEndian),this.offset+=4},writeFloat32Array:function(t){for(var e=0;e<t.length;e++)this.writeFloat32(t[e])},getDataView:function(){return this.dataview}}},830:()=>{AFRAME.registerBrush("cubes",{init:function(t,e){this.material=new THREE.MeshStandardMaterial({color:this.data.color,roughness:.5,metalness:.5,side:THREE.DoubleSide,flatShading:!0}),this.geometry=new THREE.BoxGeometry(1,1,1),this.drawingEl=document.querySelector(".a-drawing"),this.drawingEl.object3D.add(this.object3D)},addPoint:function(t,e,i,s,r){var a=new THREE.Mesh(this.geometry,this.material),n=s*this.data.size*Math.random();return a.scale.set(n,n,n),a.position.copy(i),a.quaternion.copy(e),this.object3D.add(a),!0},undo:function(){this.drawingEl.object3D.children.pop()}},{thumbnail:"brushes/thumb_cubes.gif",spacing:.01})},295:(t,e,i)=>{var s=i(297),r=i(51);!function(){r((function(){var t={vertexColors:!0,side:THREE.DoubleSide},e={roughness:.75,metalness:.25,vertexColors:!0,map:window.atlas.map,side:THREE.DoubleSide},i={roughness:.75,metalness:.25,vertexColors:!0,side:THREE.DoubleSide,map:window.atlas.map,transparent:!0,alphaTest:.5};s.addSharedBuffer("strip-flat",new THREE.MeshBasicMaterial(t)),s.addSharedBuffer("strip-shaded",new THREE.MeshStandardMaterial(e)),s.addSharedBuffer("strip-textured",new THREE.MeshStandardMaterial(i))}));for(var t,e,i,a,n,o,h={init:function(t,e){this.sharedBuffer=s.getSharedBuffer("strip-"+this.materialOptions.type),this.sharedBuffer.restartPrimitive(),this.sharedBuffer.strip=!0,this.prevIdx=Object.assign({},this.sharedBuffer.idx),this.idx=Object.assign({},this.sharedBuffer.idx),this.first=!0},remove:function(){this.sharedBuffer.remove(this.prevIdx,this.idx)},undo:function(){this.sharedBuffer.undo(this.prevIdx)},addPoint:(o=new THREE.Vector3,function(t,e,i,s,r){var a=this.materialOptions.converter;o.set(1,0,0),o.applyQuaternion(e),o.normalize();var n=i.clone(),h=i.clone(),u=this.data.size*s;if(n.add(o.clone().multiplyScalar(u/2)),h.add(o.clone().multiplyScalar(-u/2)),this.first&&this.prevIdx.position>0&&(this.first=!1,this.sharedBuffer.addVertex(n.x,n.y,n.z),this.sharedBuffer.idx.normal++,this.sharedBuffer.idx.color++,this.sharedBuffer.idx.uv++,this.idx=Object.assign({},this.sharedBuffer.idx)),this.sharedBuffer.addVertex(n.x,n.y,n.z),this.sharedBuffer.addVertex(h.x,h.y,h.z),this.sharedBuffer.idx.normal+=2,this.sharedBuffer.addColor(this.data.color.r,this.data.color.g,this.data.color.b),this.sharedBuffer.addColor(this.data.color.r,this.data.color.g,this.data.color.b),"textured"===this.materialOptions.type){this.sharedBuffer.idx.uv+=2;for(var l,d,c=this.sharedBuffer.current.attributes.uv.array,m=0;m<this.data.numPoints+1;m++)l=m/this.data.numPoints,d=4*m,0!==this.prevIdx.uv&&(d+=2*(this.prevIdx.uv+1)),c[d]=a.convertU(l),c[d+1]=a.convertV(0),c[d+2]=a.convertU(l),c[d+3]=a.convertV(1)}return this.idx=Object.assign({},this.sharedBuffer.idx),this.sharedBuffer.update(),this.computeVertexNormals(),!0}),computeVertexNormals:(t=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Vector3,a=new THREE.Vector3,n=new THREE.Vector3,function(){for(var s=0===this.prevIdx.position?0:3*(this.prevIdx.position+1),r=3*this.idx.position,o=this.sharedBuffer.current.attributes.position.array,h=this.sharedBuffer.current.attributes.normal.array,u=s;u<=r;u++)h[u]=0;var l=!0;for(u=s;u<r-6;u+=3)l?(t.fromArray(o,u),e.fromArray(o,u+3),i.fromArray(o,u+6)):(e.fromArray(o,u),i.fromArray(o,u+6),t.fromArray(o,u+3)),l=!l,a.subVectors(i,e),n.subVectors(t,e),a.cross(n),a.normalize(),h[u]+=a.x,h[u+1]+=a.y,h[u+2]+=a.z,h[u+3]+=a.x,h[u+4]+=a.y,h[u+5]+=a.z,h[u+6]+=a.x,h[u+7]+=a.y,h[u+8]+=a.z;for(u=s+6;u<r-6;u++)h[u]=h[u]/3;h[s+3]=h[s+3]/2,h[s+3+1]=h[s+3+1]/2,h[s+3+2]=h[s+3+2]/2,h[r-6]=h[r-6]/2,h[r-6+1]=h[r-6+1]/2,h[r-6+2]=h[r-6+2]/2})},u=[{name:"flat",materialOptions:{type:"flat"},thumbnail:"brushes/thumb_flat.gif"},{name:"smooth",materialOptions:{type:"shaded"},thumbnail:"brushes/thumb_smooth.gif"},{name:"squared-textured",materialOptions:{type:"textured",textureSrc:"brushes/squared_textured.png"},thumbnail:"brushes/thumb_squared_textured.gif"},{name:"line-gradient",materialOptions:{type:"textured",textureSrc:"brushes/line_gradient.png"},thumbnail:"brushes/thumb_line_gradient.gif"},{name:"silky-flat",materialOptions:{type:"textured",textureSrc:"brushes/silky_flat.png"},thumbnail:"brushes/thumb_silky_flat.gif"},{name:"silky-textured",materialOptions:{type:"textured",textureSrc:"brushes/silky_textured.png"},thumbnail:"brushes/thumb_silky_textured.gif"},{name:"lines1",materialOptions:{type:"textured",textureSrc:"brushes/lines1.png"},thumbnail:"brushes/thumb_lines1.gif"},{name:"lines2",materialOptions:{type:"textured",textureSrc:"brushes/lines2.png"},thumbnail:"brushes/thumb_lines2.gif"},{name:"lines3",materialOptions:{type:"textured",textureSrc:"brushes/lines3.png"},thumbnail:"brushes/thumb_lines3.gif"},{name:"lines4",materialOptions:{type:"textured",textureSrc:"brushes/lines4.png"},thumbnail:"brushes/thumb_lines4.gif"},{name:"lines5",materialOptions:{type:"textured",textureSrc:"brushes/lines5.png"},thumbnail:"brushes/thumb_lines5.gif"},{name:"line-grunge1",materialOptions:{type:"textured",textureSrc:"brushes/line_grunge1.png"},thumbnail:"brushes/thumb_line_grunge1.gif"},{name:"line-grunge2",materialOptions:{type:"textured",textureSrc:"brushes/line_grunge2.png"},thumbnail:"brushes/thumb_line_grunge2.gif"},{name:"line-grunge3",materialOptions:{type:"textured",textureSrc:"brushes/line_grunge3.png"},thumbnail:"brushes/thumb_line_grunge3.gif"}],l=0;l<u.length;l++){var d=u[l];d.materialOptions.textureSrc?d.materialOptions.converter=window.atlas.getUVConverters(d.materialOptions.textureSrc):d.materialOptions.converter=window.atlas.getUVConverters(null),AFRAME.registerBrush(d.name,Object.assign({},h,{materialOptions:d.materialOptions}),{thumbnail:d.thumbnail,maxPoints:3e3})}}()},775:()=>{var t,e,s,r,a;a=new THREE.ShaderMaterial({vertexShader:"varying vec2 vUv;     void main() {       vUv = uv;       gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );     }",fragmentShader:"uniform sampler2D tDiffuse;     uniform float amount;     uniform float time;     varying vec2 vUv;         vec3 hsv2rgb(vec3 c) {         vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);         vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);         return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);     }         void main() {       float h = mod(vUv.x - time / 3000.0, 1.0);       vec4 color = vec4(hsv2rgb(vec3(h, 1.0, 0.5)), 1.0);       gl_FragColor = color;     }",side:THREE.DoubleSide,uniforms:{time:{type:"f",value:0}}}),AFRAME.registerBrush("line-rainbow",{init:function(t,e){this.idx=0,this.geometry=new THREE.BufferGeometry,this.vertices=new Float32Array(3*this.options.maxPoints*3),this.indices=new Uint32Array(4.5*this.options.maxPoints*4.5),this.uvs=new Float32Array(2*this.options.maxPoints*2),this.linepositions=new Float32Array(this.options.maxPoints),this.geometry.setDrawRange(0,0),this.geometry.setAttribute("position",new THREE.BufferAttribute(this.vertices,3).setUsage(THREE.DynamicDrawUsage)),this.geometry.setIndex(new THREE.BufferAttribute(this.indices,3).setUsage(THREE.DynamicDrawUsage)),this.geometry.setAttribute("uv",new THREE.BufferAttribute(this.uvs,2).setUsage(THREE.DynamicDrawUsage)),this.geometry.setAttribute("lineposition",new THREE.BufferAttribute(this.linepositions,1).setUsage(THREE.DynamicDrawUsage)),this.material=a;var i=new THREE.Mesh(this.geometry,this.material);i.frustumCulled=!1,i.vertices=this.vertices,this.object3D.add(i),this.drawing=document.querySelector(".a-drawing"),this.drawing.object3D.add(this.object3D)},addPoint:(t=new THREE.Vector3,e=new THREE.Vector3,s=new THREE.Vector3,r=new THREE.Vector3,function(a,n,o,h,u){var l=0;for(i=0;i<this.data.numPoints;i++)this.uvs[l++]=i/(this.data.numPoints-1),this.uvs[l++]=0,this.uvs[l++]=i/(this.data.numPoints-1),this.uvs[l++]=1;t.set(1,0,0),t.applyQuaternion(n),t.normalize(),e.copy(o),s.copy(o);var d=this.data.size*h;return e.add(r.copy(t).multiplyScalar(d/2)),s.add(r.copy(t).multiplyScalar(-d/2)),this.vertices[this.idx++]=e.x,this.vertices[this.idx++]=e.y,this.vertices[this.idx++]=e.z,this.vertices[this.idx++]=s.x,this.vertices[this.idx++]=s.y,this.vertices[this.idx++]=s.z,this.idx>6&&(this.geometry.index.setXYZ(this.idx/3-4,this.idx/3-4,this.idx/3-3,this.idx/3-2),this.geometry.index.setXYZ(this.idx/3-3,this.idx/3-2,this.idx/3-3,this.idx/3-1)),this.geometry.attributes.position.needsUpdate=!0,this.geometry.index.needsUpdate=!0,this.geometry.attributes.uv.needsUpdate=!0,this.geometry.setDrawRange(0,2*this.data.numPoints*6),!0}),tick:function(t,e){this.material.uniforms.time.value=t},undo:function(){this.drawing.object3D.children.pop()}},{thumbnail:"brushes/thumb_rainbow.png",maxPoints:3e3})},891:()=>{AFRAME.registerBrush("single-sphere",{init:function(t,e){this.material=new THREE.MeshStandardMaterial({color:this.data.color,roughness:.6,metalness:.2,side:THREE.FrontSide,flatShading:!0}),this.geometry=new THREE.IcosahedronGeometry(1,2),this.mesh=new THREE.Mesh(this.geometry,this.material),this.object3D.add(this.mesh),this.mesh.visible=!1,this.drawingEl=document.querySelector(".a-drawing"),this.drawingEl.object3D.add(this.object3D)},addPoint:function(t,e,i,s,r){this.firstPoint||(this.firstPoint=i.clone(),this.mesh.position.set(this.firstPoint.x,this.firstPoint.y,this.firstPoint.z)),this.mesh.visible=!0;var a=this.firstPoint.distanceTo(i);return this.mesh.scale.set(a,a,a),!0},undo:function(){this.drawingEl.object3D.children.pop()}},{thumbnail:"brushes/thumb_single_sphere.png",spacing:0})},988:()=>{AFRAME.registerBrush("spheres",{init:function(t,e){this.material=new THREE.MeshStandardMaterial({color:this.data.color,roughness:.5,metalness:.5,side:THREE.DoubleSide,flatShading:!0}),this.geometry=new THREE.IcosahedronGeometry(1,0),this.drawingEl=document.querySelector(".a-drawing"),this.drawingEl.object3D.add(this.object3D)},addPoint:function(t,e,i,s,r){var a=new THREE.Mesh(this.geometry,this.material),n=this.data.size/2*s;return a.scale.set(n,n,n),a.initialScale=a.scale.clone(),a.phase=Math.random()*Math.PI*2,a.position.copy(i),a.quaternion.copy(e),this.object3D.add(a),!0},tick:function(t,e){for(var i=0;i<this.object3D.children.length;i++){var s=this.object3D.children[i],r=(Math.sin(s.phase+t/500)+1)/2+.1;s.scale.copy(s.initialScale).multiplyScalar(r)}},undo:function(){this.drawingEl.object3D.children.pop()}},{thumbnail:"brushes/thumb_spheres.gif",spacing:.01})},623:(t,e,i)=>{var s=i(297),r=i(51);!function(){r((function(){var t=new THREE.MeshStandardMaterial({side:THREE.DoubleSide,map:window.atlas.map,vertexColors:!0,transparent:!0,alphaTest:.5,roughness:.75,metalness:.25}),e=new THREE.MeshBasicMaterial({side:THREE.DoubleSide,map:window.atlas.map,vertexColors:!0,transparent:!0,alphaTest:.5});s.addSharedBuffer("tris-flat",e),s.addSharedBuffer("tris-shaded",t)}));for(var t,e,i,a,n,o,h,u,l={init:function(t,e){this.sharedBuffer=s.getSharedBuffer("tris-"+this.materialOptions.type),this.prevIdx=Object.assign({},this.sharedBuffer.idx),this.idx=Object.assign({},this.sharedBuffer.idx),this.sharedBuffer.strip=!1,this.currAngle=0,this.subTextures=1,this.angleJitter=0,this.autoRotate=!1,void 0!==this.materialOptions.subTextures&&(this.subTextures=this.materialOptions.subTextures),!0===this.materialOptions.autoRotate&&(this.autoRotate=!0),void 0!==this.materialOptions.angleJitter&&(this.angleJitter=this.materialOptions.angleJitter,this.angleJitter=2*this.angleJitter-this.angleJitter)},remove:function(){this.sharedBuffer.remove(this.prevIdx,this.idx)},undo:function(){this.sharedBuffer.undo(this.prevIdx)},addPoint:(t=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Vector3,a=new THREE.Vector3,n=new THREE.Vector3,o=new THREE.Vector3,h=new THREE.Vector3,u=Math.PI/2,function(s,r,l,d,c){e.set(1,0,0),e.applyQuaternion(r),e.normalize(),t.set(0,1,0),t.applyQuaternion(r),t.normalize();var m=this.data.size*d/2,p=Math.PI/4+Math.random()*this.angleJitter;this.autoRotate&&(this.currAngle+=.1,p+=this.currAngle),i.copy(l).add(h.copy(e.applyAxisAngle(t,p)).multiplyScalar(m)),a.copy(l).add(h.copy(e.applyAxisAngle(t,u)).multiplyScalar(m)),n.copy(l).add(h.copy(e.applyAxisAngle(t,u)).multiplyScalar(m)),o.copy(l).add(e.applyAxisAngle(t,u).multiplyScalar(m)),this.idx.position,this.idx.position,this.sharedBuffer.addVertex(i.x,i.y,i.z),this.sharedBuffer.addVertex(a.x,a.y,a.z),this.sharedBuffer.addVertex(n.x,n.y,n.z),this.sharedBuffer.addVertex(n.x,n.y,n.z),this.sharedBuffer.addVertex(o.x,o.y,o.z),this.sharedBuffer.addVertex(i.x,i.y,i.z);for(var f=0;f<6;f++)this.sharedBuffer.addNormal(t.x,t.y,t.z),this.sharedBuffer.addColor(this.data.color.r,this.data.color.g,this.data.color.b);this.data.numPoints;var g=0,b=1;if(this.subTextures>1){var v=Math.floor(Math.random()*this.subTextures);b=(g=1/this.subTextures*v)+1/this.subTextures}var y=this.materialOptions.converter;return this.sharedBuffer.addUV(y.convertU(g),y.convertV(1)),this.sharedBuffer.addUV(y.convertU(g),y.convertV(0)),this.sharedBuffer.addUV(y.convertU(b),y.convertV(0)),this.sharedBuffer.addUV(y.convertU(b),y.convertV(0)),this.sharedBuffer.addUV(y.convertU(b),y.convertV(1)),this.sharedBuffer.addUV(y.convertU(g),y.convertV(1)),this.idx=Object.assign({},this.sharedBuffer.idx),this.sharedBuffer.update(),!0})},d=[{name:"dots",materialOptions:{type:"shaded",textureSrc:"brushes/stamp_dots.png"},thumbnail:"brushes/thumb_stamp_dots.gif",spacing:.01},{name:"squares",materialOptions:{type:"shaded",textureSrc:"brushes/stamp_squares.png"},thumbnail:"brushes/thumb_stamp_squares.gif",spacing:.01},{name:"column",materialOptions:{type:"shaded",autoRotate:!0,textureSrc:"brushes/stamp_column.png"},thumbnail:"brushes/thumb_stamp_column.gif",spacing:.01},{name:"gear1",materialOptions:{type:"shaded",angleJitter:2*Math.PI,subTextures:2,textureSrc:"brushes/stamp_gear.png"},thumbnail:"brushes/thumb_stamp_gear.gif",spacing:.05},{name:"grunge1",materialOptions:{type:"shaded",angleJitter:2*Math.PI,textureSrc:"brushes/stamp_grunge1.png"},thumbnail:"brushes/stamp_grunge1.png",spacing:.02},{name:"grunge2",materialOptions:{type:"shaded",angleJitter:2*Math.PI,textureSrc:"brushes/stamp_grunge2.png"},thumbnail:"brushes/stamp_grunge2.png",spacing:.02},{name:"grunge3",materialOptions:{type:"shaded",angleJitter:2*Math.PI,textureSrc:"brushes/stamp_grunge3.png"},thumbnail:"brushes/stamp_grunge3.png",spacing:.02},{name:"grunge4",materialOptions:{type:"shaded",angleJitter:2*Math.PI,textureSrc:"brushes/stamp_grunge4.png"},thumbnail:"brushes/stamp_grunge4.png",spacing:.02},{name:"grunge5",materialOptions:{type:"shaded",angleJitter:2*Math.PI,textureSrc:"brushes/stamp_grunge5.png"},thumbnail:"brushes/thumb_stamp_grunge5.gif",spacing:.02},{name:"leaf1",materialOptions:{type:"shaded",angleJitter:Math.PI,textureSrc:"brushes/stamp_leaf1.png"},thumbnail:"brushes/stamp_leaf1.png",spacing:.03},{name:"leaf2",materialOptions:{type:"shaded",angleJitter:60*Math.PI/180,textureSrc:"brushes/stamp_leaf2.png"},thumbnail:"brushes/thumb_stamp_leaf2.gif",spacing:.03},{name:"leaf3",materialOptions:{type:"shaded",angleJitter:60*Math.PI/180,textureSrc:"brushes/stamp_leaf3.png"},thumbnail:"brushes/thumb_stamp_leaf3.gif",spacing:.03},{name:"fur1",materialOptions:{type:"shaded",angleJitter:40*Math.PI/180,subTextures:2,textureSrc:"brushes/stamp_fur1.png"},thumbnail:"brushes/stamp_fur1.png",spacing:.01},{name:"fur2",materialOptions:{type:"shaded",angleJitter:10*Math.PI/180,subTextures:3,textureSrc:"brushes/stamp_fur2.png"},thumbnail:"brushes/stamp_fur2.png",spacing:.01},{name:"grass",materialOptions:{type:"shaded",angleJitter:10*Math.PI/180,subTextures:3,textureSrc:"brushes/stamp_grass.png"},thumbnail:"brushes/thumb_stamp_grass.png",spacing:.03},{name:"bush",materialOptions:{type:"shaded",subTextures:2,textureSrc:"brushes/stamp_bush.png"},thumbnail:"brushes/thumb_stamp_bush.gif",spacing:.04},{name:"star",materialOptions:{type:"shaded",textureSrc:"brushes/stamp_star.png"},thumbnail:"brushes/thumb_stamp_star.png",spacing:.06},{name:"snow",materialOptions:{type:"shaded",angleJitter:2*Math.PI,textureSrc:"brushes/stamp_snow.png"},thumbnail:"brushes/thumb_stamp_snow.png",spacing:.06}],c=0;c<d.length;c++){var m=d[c];m.materialOptions.textureSrc&&(m.materialOptions.map=window.atlas.map,m.materialOptions.converter=window.atlas.getUVConverters(m.materialOptions.textureSrc),delete m.materialOptions.textureSrc),AFRAME.registerBrush(m.name,Object.assign({},l,{materialOptions:m.materialOptions}),{thumbnail:m.thumbnail,spacing:m.spacing,maxPoints:3e3})}}()},142:()=>{AFRAME.registerComponent("brush-tip",{schema:{controller:{type:"string"},hand:{type:"string",oneOf:["left","right"]},model:{type:"string",default:"#tipObj"}},init:function(){var t=t=>THREE.MathUtils.degToRad(t);this.controllers={default:{left:{positionOffset:{x:0,y:-.025,z:-.042},rotationOffset:{x:t(-45),y:t(7),z:t(-7)}},right:{positionOffset:{x:0,y:-.025,z:-.042},rotationOffset:{x:t(-45),y:t(-7),z:t(7)}}}},this.data.controller&&this.setController(this.data.controller,this.data.hand),this.el.setAttribute("gltf-model",this.data.model)},setController:function(t,e){this.controllers[t]||(t="default"),this.el.object3D.position.set(this.controllers[t][e].positionOffset.x,this.controllers[t][e].positionOffset.y,this.controllers[t][e].positionOffset.z),this.el.object3D.rotation.set(this.controllers[t][e].rotationOffset.x,this.controllers[t][e].rotationOffset.y,this.controllers[t][e].rotationOffset.z)}})},620:()=>{var t,e,i;AFRAME.registerComponent("brush",{schema:{hand:{type:"string",oneOf:["left","right"],default:null},color:{type:"color",default:"#ef2d5e"},size:{default:.01,min:.001,max:.3},sizeModifier:{type:"number",default:0},brush:{default:"smooth"},owner:{type:"string",default:"local"},enabled:{type:"boolean",default:!0}},init:function(){var t=this.data;this.color=new THREE.Color(t.color),this.el.emit("brushcolor-changed",{color:this.color}),this.el.emit("brushsize-changed",{brushSize:t.size}),this.obj=this.el.object3D,this.currentStroke=null,this.strokeEntities=[],this.textures={},this.currentMap=0,this.model=this.el.getObject3D("mesh"),this.drawing=!1,this.onUndo=this.onUndo.bind(this),this.onPaint=this.onPaint.bind(this),this.el.addEventListener("undo",this.onUndo),this.el.addEventListener("paint",this.onPaint),null===this.data.hand?this.hand=this.el.id.endsWith("right-hand")?"right":"left":this.hand=this.data.hand},update:function(t){var e=this.data;t.sizeModifier!==this.data.sizeModifier&&this.paint(),t.color!==e.color&&(this.color.set(e.color),this.el.emit("brushcolor-changed",{color:this.color})),t.size!==e.size&&this.el.emit("brushsize-changed",{size:e.size})},tick:(t=new THREE.Vector3,e=new THREE.Quaternion,i=new THREE.Vector3,function(s,r){if(this.currentStroke&&this.active){this.obj.matrixWorld.decompose(t,e,i);var a=this.system.getPointerPosition(t,e,this.hand);this.currentStroke.addPoint(t,e,a,this.sizeModifier,s)}}),remove:function(){this.clear()},startNewStroke:function(){this.el.components.ui?.playSound("ui_paint"),this.currentStroke=this.system.addNewStroke(this.data.brush,this.color,this.data.size,this.data.owner),this.el.emit("stroke-started",{entity:this.el,stroke:this.currentStroke})},paint:function(){this.sizeModifier=this.data.enabled?this.data.sizeModifier:0,this.sizeModifier>.1?this.active||(this.startNewStroke(),this.active=!0):this.active&&(this.previousEntity=this.currentEntity,this.currentStroke=null,this.active=!1)},undo:function(){this.system.undo(this.data.owner)},clear:function(){this.system.clear(this.data.owner)},onUndo:function(t){this.data.enabled&&(this.undo(),this.el.components.ui?.playSound("ui_undo"))},onPaint:function(t){this.data.sizeModifier=t.detail.value,this.paint()}})},510:()=>{AFRAME.registerComponent("json-model",{schema:{src:{type:"asset"}},init:function(){this.objectLoader=new THREE.ObjectLoader,this.objectLoader.setCrossOrigin("")},update:function(t){var e=this,i=this.data.src;i&&i!==t.src&&this.objectLoader.load(this.data.src,(function(t){var s=(new THREE.Matrix4).makeRotationX(-Math.PI/2);t.traverse((function(t){t instanceof THREE.Mesh&&t.position.applyMatrix4(s)})),e.el.setObject3D("mesh",t),e.el.emit("model-loaded",{format:"json",model:t,src:i})}))}})},788:()=>{AFRAME.registerComponent("logo-model",{schema:{opacity:{default:1}},init:function(){this.model=null,this.el.setAttribute("obj-model","obj: #logoobj; mtl: #logomtl"),this.el.addEventListener("model-loaded",this.setModel.bind(this))},setModel:function(t){this.model=t.detail.model},update:function(){null!=this.model&&(this.model.children[0].material.opacity=this.data.opacity)}})},101:()=>{AFRAME.registerSystem("paint-controls",{numberStrokes:0,tooltipFadeEvent:new Event("tooltip-fade"),tooltipsDisplayed:!1,showTooltips:function(t){if(!this.tooltipsDisplayed){for(const e of Utils.getTooltips(t)){e.setAttribute("visible",!0);for(const t of e.querySelectorAll("[tooltip]"))t.setAttribute("animation",{dur:1e3,delay:2e3,property:"tooltip.opacity",from:1,to:0,startEvents:"tooltip-fade"}),t.addEventListener("animationcomplete",this.hideTooltipLine,{once:!0})}this.tooltipsDisplayed=!0}},hideTooltips:function(){if(this.numberStrokes++,3===this.numberStrokes)for(const t of document.querySelectorAll("[tooltip]"))t.dispatchEvent(this.tooltipFadeEvent)},hideTooltipLine:function(t){const e=t.target.getObject3D("line");e&&(e.visible=!1)}}),AFRAME.registerComponent("paint-controls",{dependencies:["brush"],schema:{hand:{type:"string",oneOf:["left","right"],default:"left"},controller:{type:"string",default:"auto"},tipModel:{type:"string",default:"#tipObj"},tooltips:{type:"boolean",default:!0},hideController:{type:"boolean",default:!1}},init:function(){var t="assets/images/controller-pressed.png";this.controller=null,this.modelLoaded=!1,this.touchStarted=!1,this.startAxis=0,this.numberStrokes=0,this.el.object3D.visible=!1,this.onModelLoaded=this.onModelLoaded.bind(this),this.onChangeBrushSizeAbs=this.onChangeBrushSizeAbs.bind(this),this.onChangeBrushSizeInc=this.onChangeBrushSizeInc.bind(this),this.onStartChangeBrushSize=this.onStartChangeBrushSize.bind(this),this.onControllerconnected=this.onControllerconnected.bind(this),this.onBrushSizeChanged=this.onBrushSizeChanged.bind(this),this.onBrushColorChanged=this.onBrushColorChanged.bind(this),this.onStrokeStarted=this.onStrokeStarted.bind(this),"auto"!==this.data.controller&&this.setController(this.data.controller,this.data.hand),this.el.sceneEl.systems.material.loadTexture(t,{src:t},this.createTexture.bind(this))},createTexture:function(t){var e=this.highLightMaterial=new THREE.MeshBasicMaterial;e.map=t,e.needsUpdate=!0},createBrushTip:function(t,e){this.brushTip=document.createElement("a-entity"),this.brushTip.id=`${e}-tip`,this.brushTip.setAttribute("brush-tip",{hand:e,controller:t,model:this.tipModel}),this.brushTip.addEventListener("model-loaded",this.onModelLoaded),this.el.appendChild(this.brushTip)},changeBrushColor:function(t){this.modelLoaded&&this.buttonMeshes.sizeHint&&(this.buttonMeshes.colorTip.material.color.copy(t),this.buttonMeshes.sizeHint.material.color.copy(t))},changeBrushSize:function(t){var e=t/2*10;this.modelLoaded&&this.buttonMeshes.sizeHint&&this.buttonMeshes.sizeHint.scale.set(e,1,e)},mapping:{axis0:"trackpad",axis1:"trackpad",button0:"trackpad",button1:"trigger",button2:"grip",button3:"menu",button4:"system"},update:function(){const t={hand:this.data.hand,model:!0};this.el.setAttribute("magicleap-controls",t),this.el.setAttribute("vive-controls",t),this.el.setAttribute("oculus-touch-controls",t),this.el.setAttribute("pico-controls",t),this.el.setAttribute("windows-motion-controls",t),this.el.setAttribute("hp-mixed-reality-controls",t)},addEventListeners:function(){this.el.addEventListener("model-loaded",this.onModelLoaded),this.el.addEventListener("changeBrushSizeAbs",this.onChangeBrushSizeAbs),this.el.addEventListener("changeBrushSizeInc",this.onChangeBrushSizeInc),this.el.addEventListener("startChangeBrushSize",this.onStartChangeBrushSize),this.el.addEventListener("controllerconnected",this.onControllerconnected),this.el.addEventListener("brushsize-changed",this.onBrushSizeChanged),this.el.addEventListener("brushcolor-changed",this.onBrushColorChanged),document.addEventListener("stroke-started",this.onStrokeStarted)},removeEventListeners:function(){this.el.removeEventListener("model-loaded",this.onModelLoaded),this.el.removeEventListener("changeBrushSizeAbs",this.onChangeBrushSizeAbs),this.el.removeEventListener("changeBrushSizeInc",this.onChangeBrushSizeInc),this.el.removeEventListener("startChangeBrushSize",this.onStartChangeBrushSize),this.el.removeEventListener("controllerconnected",this.onControllerconnected),this.el.removeEventListener("brushsize-changed",this.onBrushSizeChanged),this.el.removeEventListener("brushcolor-changed",this.onBrushColorChanged),document.removeEventListener("stroke-started",this.onStrokeStarted)},setModelVisibility:function(){const t=this.isPlaying?!this.data.hideController:this.data.hideController;this.controllerModel=this.el.getObject3D("mesh"),this.controllerModel&&(this.controllerModel.visible=t)},setController:function(t,e){this.controller||(this.createBrushTip(t,e),this.data.tooltips&&this.system.showTooltips(t),this.controller=this.data.controller=t,this.el.object3D.visible=!0)},play:function(){this.addEventListeners(),this.isPlaying=!0,this.setModelVisibility(),this.el.components.brush.data.enabled=!0},pause:function(){this.removeEventListeners(),this.isPlaying=!1,this.setModelVisibility(),this.el.components.brush.data.enabled=!1},onModelLoaded:function(t){if(this.controllerModel||this.setModelVisibility(),(t.target===this.el||t.target.id.includes("-tip"))&&!this.buttonMeshes){var e,i=t.detail.model;(e=this.buttonMeshes={}).sizeHint=i.getObjectByName("sizehint"),e.colorTip=i.getObjectByName("tip"),this.modelLoaded=!0,this.changeBrushSize(this.el.components.brush.data.size),this.changeBrushColor(this.el.components.brush.color)}},onChangeBrushSizeAbs:function(t){if(0!==t.detail.axis[1]||0!==t.detail.axis[3]){var e=(t.detail.axis[1]||t.detail.axis[3])/300,i=this.el.components.brush.schema.size,s=THREE.MathUtils.clamp(this.el.getAttribute("brush").size-e,i.min,i.max);this.el.setAttribute("brush","size",s)}},onChangeBrushSizeInc:function(t){if(0!==t.detail.axis[1]||0!==t.detail.axis[3]){var e=t.detail.axis[1]||t.detail.axis[3];this.touchStarted&&(this.touchStarted=!1,this.startAxis=(e+1)/2);var i=(e+1)/2,s=(this.startAxis-i)/2;this.startAxis=i;var r=this.el.getAttribute("brush").size,a=this.el.components.brush.schema.size,n=THREE.MathUtils.clamp(r-s,a.min,a.max);this.el.setAttribute("brush","size",n)}},onStartChangeBrushSize:function(){this.touchStarted=!0},onControllerconnected:function(t){var e=t.detail.name,i=t.detail.component.data.hand;this.setController(e,i)},onBrushSizeChanged:function(t){this.changeBrushSize(t.detail.size)},onBrushColorChanged:function(t){this.changeBrushColor(t.detail.color)},onStrokeStarted:function(t){t.detail.entity.components["paint-controls"]===this&&(this.numberStrokes++,this.data.tooltips&&this.system.hideTooltips())},onButtonEvent:function(t,e){var i=this.mapping["button"+t];this.el.emit(i+e),this.updateModel(i,e)},updateModel:function(t,e){var i="up"===e?this.material:this.highLightMaterial,s=this.buttonMeshes,r=s&&s[t];if("down"===e&&r&&!this.material&&(i=this.material=r.material),i)return"grip"===t?(s.grip.left.material=i,void(s.grip.right.material=i)):void(r&&(r.material=i))}})},579:()=>{var t,e,i;AFRAME.registerComponent("ui-raycaster",{schema:{far:{default:1/0},interval:{default:100},near:{default:0},objects:{default:""},recursive:{default:!0},rotation:{default:0}},init:function(){this.direction=new THREE.Vector3,this.intersectedEls=[],this.objects=null,this.prevCheckTime=void 0,this.raycaster=new THREE.Raycaster,this.updateOriginDirection(),this.refreshObjects=this.refreshObjects.bind(this)},play:function(){this.el.sceneEl.addEventListener("child-attached",this.refreshObjects),this.el.sceneEl.addEventListener("child-detached",this.refreshObjects)},pause:function(){this.el.sceneEl.removeEventListener("child-attached",this.refreshObjects),this.el.sceneEl.removeEventListener("child-detached",this.refreshObjects)},update:function(){var t=this.data,e=this.raycaster;e.far=t.far,e.near=t.near,this.refreshObjects()},refreshObjects:function(){var t,e,i=this.data;if(i.objects)for(e=this.el.sceneEl.querySelectorAll(i.objects),this.objects=[],t=0;t<e.length;t++)this.objects.push(e[t].object3D);else this.objects=this.el.sceneEl.object3D.children},tick:function(t){var e,i,s,r=this.el,a=this.data,n=this.prevCheckTime;n&&t-n<a.interval||(s=this.intersectedEls.slice(),this.updateOriginDirection(),i=(i=this.raycaster.intersectObjects(this.objects,a.recursive)).filter((function(t){return!!t.object.el})),e=this.intersectedEls=i.map((function(t){return t.object.el})),i.forEach((function(t){t.object.el.emit("raycaster-intersected",{el:r,intersection:t})})),i.length&&r.emit("raycaster-intersection",{els:e,intersections:i}),s.forEach((function(t){-1===e.indexOf(t)&&(r.emit("raycaster-intersection-cleared",{el:t}),t.emit("raycaster-intersected-cleared",{el:r}))})))},updateOriginDirection:(t=new THREE.Quaternion,e=new THREE.Vector3,i=new THREE.Vector3,function(){var s=this.el,r=this.direction,a=s.object3D;a.updateMatrixWorld(),a.matrixWorld.decompose(e,t,i),r.set(0,0,-1),r.applyAxisAngle(new THREE.Vector3(1,0,0),this.data.rotation/360*2*Math.PI),r.applyQuaternion(t),this.raycaster.set(e,r)})})},688:()=>{var t,e,i,s,r,a;AFRAME.registerComponent("ui",{schema:{brightness:{default:1,max:1,min:0},opacity:{default:0}},dependencies:["ui-raycaster","brush"],init:function(){var t=this.el,e=this.uiEl=document.createElement("a-entity"),i=this.rayEl=document.createElement("a-entity");this.closed=!0,this.isTooltipPaused=!1,this.colorStack=["#272727","#727272","#FFFFFF","#24CAFF","#249F90","#F2E646","#EF2D5E"],this.bindMethods(),this.colorHasChanged=!0,this.highlightMaterials={},this.intersectedObjects=[],this.hoveredOffObjects=[],this.hoveredOnObjects=[],this.pressedObjects={},this.selectedObjects={},this.unpressedObjects={},this.brushButtonsMapping={},this.brushRegexp=/^(?!.*(fg|bg)$)brush[0-9]+/,this.colorHistoryRegexp=/^(?!.*(fg|bg)$)colorhistory[0-9]+$/,this.hsv={h:0,s:0,v:1},this.rayAngle=45,this.rayDistance=.2,this.cursorOffset=new THREE.Vector3(.06409,.01419,-.10242),e.setAttribute("material",{color:"#ffffff",flatShading:!0,shader:"flat",transparent:!0,fog:!1,src:"#uinormal"}),e.setAttribute("obj-model","obj:#uiobj"),e.setAttribute("position","0 0.04 -0.15"),e.setAttribute("scale","0 0 0"),e.setAttribute("visible",!1),e.classList.add("apainter-ui"),t.appendChild(e),i.setAttribute("line",""),t.appendChild(i),t.setAttribute("ui-raycaster",{far:this.rayDistance,objects:".apainter-ui",rotation:-this.rayAngle}),this.controller=null;var s=this;t.addEventListener("controllerconnected",(function(i){var r=i.detail.name;s.tooltips=Utils.getTooltips(r),s.controller={name:r,hand:i.detail.component.data.hand},"oculus-touch-controls"===r?(s.uiEl.setAttribute("rotation","45 0 0"),e.setAttribute("position","0 0.13 -0.08"),s.rayAngle=0,t.setAttribute("ui-raycaster",{rotation:0})):"windows-motion-controls"===r&&(s.rayAngle=25,s.rayDistance=1,t.setAttribute("ui-raycaster",{rotation:-30,far:s.rayDistance})),s.el.isPlaying&&s.addToggleEvent(),s.adjustTooltips()}))},adjustTooltips:function(){const t=new THREE.Box3,e=new THREE.Vector3;return function(){if("oculus-touch-controls"!==this.controller.name)return;const i=this,s=this.el.querySelector(".oculus-tooltips");this.el.addEventListener("model-loaded",(function(r){r.target===i.el&&r.detail.model.traverse((function(i){let r;"a_button_pressed_value"!==i.name&&"x_button_pressed_value"!==i.name||(r=s.querySelector("[data-tooltip=menu]")),"b_button_pressed_value"!==i.name&&"y_button_pressed_value"!==i.name||(r=s.querySelector("[data-tooltip=teleport]")),"xr_standard_thumbstick_pressed_value"===i.name&&(r=s.querySelector("[data-tooltip=brush-size]")),"xr_standard_trigger_pressed_value"===i.name&&(r=s.querySelector("[data-tooltip=paint]")),"xr_standard_squeeze_pressed_value"===i.name&&(r=s.querySelector("[data-tooltip=undo]")),r&&(t.setFromObject(i,!0).getCenter(e),e.add(i.parent.position),r.setAttribute("tooltip",{targetPosition:e}))}))}))}}(),initColorWheel:function(){var t=this.objects.hueWheel,e=new THREE.ShaderMaterial({uniforms:{brightness:{type:"f",value:this.hsv.v}},vertexShader:"      varying vec2 vUv;      void main() {        vUv = uv;        vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);        gl_Position = projectionMatrix * mvPosition;      }      ",fragmentShader:"      #define M_PI2 6.28318530718\n       uniform float brightness;      varying vec2 vUv;      vec3 hsb2rgb(in vec3 c){          vec3 rgb = clamp(abs(mod(c.x * 6.0 + vec3(0.0, 4.0, 2.0), 6.0) - 3.0) - 1.0,                            0.0,                            1.0 );          rgb = rgb * rgb * (3.0 - 2.0 * rgb);          return c.z * mix( vec3(1.0), rgb, c.y);      }            void main() {        vec2 toCenter = vec2(0.5) - vUv;        float angle = atan(toCenter.y, toCenter.x);        float radius = length(toCenter) * 2.0;        vec3 color = hsb2rgb(vec3((angle / M_PI2) + 0.5, radius, brightness));        gl_FragColor = vec4(color, 1.0);      }      "});t.material=e},bindMethods:function(){this.onComponentChanged=this.onComponentChanged.bind(this),this.onTriggerChanged=this.onTriggerChanged.bind(this),this.onIntersection=this.onIntersection.bind(this),this.onIntersected=this.onIntersected.bind(this),this.onIntersectionCleared=this.onIntersectionCleared.bind(this),this.onIntersectedCleared=this.onIntersectedCleared.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.onStrokeStarted=this.onStrokeStarted.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.open=this.open.bind(this),this.close=this.close.bind(this)},tick:function(){!this.closed&&this.handEl&&(this.updateIntersections(),this.handleHover(),this.handlePressedButtons())},update:function(){this.messagesMaterial&&(this.messagesMaterial.opacity=this.data.opacity)},onTriggerChanged:function(t){var e=t.detail.value;this.lastTriggerValue=e,t.detail.value>=.25?this.triggeredPressed=!0:(this.triggeredPressed=!1,this.handleButtonUp())},handleButtonDown:function(t,e){var i=t.name;if(!this.activeWidget||this.activeWidget===i){switch(this.activeWidget=i,!0){case"brightness"===i:this.onBrightnessDown(e);break;case"brushnext"===i:this.pressedObjects[i]||this.nextPage();break;case"brushprev"===i:this.pressedObjects[i]||this.previousPage();break;case"clear"===i:this.pressedObjects[i]||(this.el.components.brush.clear(),this.playSound("ui_click1"));break;case"copy"===i:this.pressedObjects[i]||(this.copyBrush(),this.playSound("ui_click1"));break;case"hue"===i:this.onHueDown(e);break;case"save"===i:this.pressedObjects[i]||(this.el.sceneEl.systems.painter.upload(),this.playSound("ui_click1"));break;case"sizebg"===i:this.onBrushSizeBackgroundDown(e);break;case this.brushRegexp.test(i):this.onBrushDown(i);break;case this.colorHistoryRegexp.test(i):this.onColorHistoryButtonDown(t);break;default:this.activeWidget=void 0}this.pressedObjects[i]=t}},copyBrush:function(){var t=this.el.getAttribute("brush");this.handEl.setAttribute("brush","brush",t.brush),this.handEl.setAttribute("brush","color",t.color),this.handEl.setAttribute("brush","size",t.size),this.colorHasChanged=!0},handleButtonUp:function(){var t=this.pressedObjects,e=this.unpressedObjects;this.activeWidget=void 0,Object.keys(t).forEach((function(i){var s=t[i].name;e[s]=t[s],delete t[s]}))},handlePressedButtons:function(){var t=this;this.triggeredPressed&&this.hoveredOnObjects.forEach((function(e){t.handleButtonDown(e.object,e.point)}))},onColorHistoryButtonDown:function(t){var e=t.material.color.getHexString();this.handEl.setAttribute("brush","color","#"+e),this.playSound("ui_click0",t.name)},onBrushDown:function(t){var e=this.brushButtonsMapping[t];e&&(this.selectBrushButton(t),this.handEl.setAttribute("brush","brush",e.toLowerCase()))},selectBrushButton:function(t){var e=this.uiEl.getObject3D("mesh").getObjectByName(t+"bg"),i=this.selectedObjects,s=this.selectedBrush;s&&(this.highlightMaterials[s.name]||this.initHighlightMaterial(e),s.material=this.highlightMaterials[s.name].normal,delete i[s.name]),i[e.name]=e,this.selectedBrush=e,this.playSound("ui_click1",t)},onHueDown:function(t){var e,i=this.objects.hueWheel,s=this.colorWheelSize;i.updateMatrixWorld(),i.worldToLocal(t),this.objects.hueCursor.position.copy(t);var r=((e={r:Math.sqrt(t.x*t.x+t.z*t.z),theta:Math.PI+Math.atan2(-t.z,t.x)}).theta*(180/Math.PI)+180)%360;this.hsv.h=r/360,this.hsv.s=e.r/s,this.updateColor(),this.playSound("ui_click0","hue")},updateColor:function(){var t=this.hsv2rgb(this.hsv),e="rgb("+t.r+", "+t.g+", "+t.b+")";this.handEl.setAttribute("brush","color",e),this.colorHasChanged=!0},hsv2rgb:function(t){var e,i,s,r,a,n,o,h,u=THREE.MathUtils.clamp(t.h,0,1),l=THREE.MathUtils.clamp(t.s,0,1),d=t.v;switch(n=d*(1-l),o=d*(1-(a=6*u-(r=Math.floor(6*u)))*l),h=d*(1-(1-a)*l),r%6){case 0:e=d,i=h,s=n;break;case 1:e=o,i=d,s=n;break;case 2:e=n,i=d,s=h;break;case 3:e=n,i=o,s=d;break;case 4:e=h,i=n,s=d;break;case 5:e=d,i=n,s=o}return{r:Math.round(255*e),g:Math.round(255*i),b:Math.round(255*s)}},rgb2hsv:function(t,e,i){var s,r=Math.max(t,e,i),a=Math.min(t,e,i),n=r-a,o=0===r?0:n/r,h=r;switch(1===arguments.length&&(e=t.g,i=t.b,t=t.r),r){case a:s=0;break;case t:s=e-i+n*(e<i?6:0),s/=6*n;break;case e:s=i-t+2*n,s/=6*n;break;case i:s=t-e+4*n,s/=6*n}return{h:s,s:o,v:h}},onBrightnessDown:function(t){var e=this.objects.brightnessSlider,i=e.geometry.boundingBox,s=i.max.z-i.min.z;e.updateMatrixWorld(),e.worldToLocal(t);var r=1-(t.z-i.min.z)/s;r=THREE.MathUtils.clamp(1.29*r-.12,0,1),this.objects.hueWheel.material.uniforms.brightness.value=r,this.objects.brightnessCursor.rotation.y=1.5*r-1.5,this.hsv.v=r,this.updateColor(),this.playSound("ui_click0","brightness")},onBrushSizeBackgroundDown:function(t){var e=this.objects.sizeSlider,i=e.geometry.boundingBox,s=i.max.x-i.min.x;e.updateMatrixWorld(),e.worldToLocal(t);var r=(t.x-i.min.x)/s;r*=AFRAME.components.brush.schema.size.max,this.handEl.setAttribute("brush","size",r),this.playSound("ui_click0","sizebg")},handleHover:function(){this.updateHoverObjects(),this.updateMaterials()},updateHoverObjects:function(){var t=this.intersectedObjects;t=t.filter((function(t){return"bb"!==t.object.name&&"msg_save"!==t.object.name})),this.hoveredOffObjects=this.hoveredOnObjects.filter((function(e){return-1===t.indexOf(e)})),this.hoveredOnObjects=t},updateMaterials:(a=new THREE.Vector3,function(){var t=this,e=this.pressedObjects,i=this.unpressedObjects,s=this.selectedObjects;this.hoveredOffObjects.forEach((function(e){var i=e.object;i.material=t.highlightMaterials[i.name].normal})),this.hoveredOnObjects.forEach((function(e){var i=e.object;a.copy(e.point),t.highlightMaterials[i.name]||t.initHighlightMaterial(i),t.handRayEl.object3D.worldToLocal(a),t.handRayEl.setAttribute("line","end",a),i.material=t.highlightMaterials[i.name].hover})),Object.keys(e).forEach((function(i){var s=e[i],r=t.highlightMaterials[s.name];s.material=r.pressed||s.material})),Object.keys(i).forEach((function(e){var s=i[e],r=t.highlightMaterials[s.name];s.material=r.normal,delete i[e]})),Object.keys(s).forEach((function(e){var i=s[e],r=t.highlightMaterials[i.name];r&&(i.material=r.selected)}))}),addToggleEvent:function(){this.el.addEventListener("toggleMenu",this.toggleMenu)},removeToggleEvent:function(){this.el.removeEventListener("toggleMenu",this.toggleMenu)},play:function(){var t=this.el,e=this.handEl;this.controller&&this.addToggleEvent(),t.addEventListener("model-loaded",this.onModelLoaded),t.addEventListener("raycaster-intersection",this.onIntersection),t.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),t.addEventListener("raycaster-intersected",this.onIntersected),t.addEventListener("raycaster-intersected-cleared",this.onIntersectedCleared),e&&this.addHandListeners()},pause:function(){var t=this.el,e=this.handEl;this.controller&&this.removeToggleEvent(),t.removeEventListener("raycaster-intersection",this.onIntersection),t.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),t.removeEventListener("raycaster-intersected",this.onIntersected),t.removeEventListener("raycaster-intersected-cleared",this.onIntersectedCleared),e&&this.removeHandListeners()},onModelLoaded:function(t){var e=this.uiEl.getObject3D("mesh");if(e=t.detail.model,"obj"===t.detail.format&&e.getObjectByName("brightnesscursor")){this.objects={},this.objects.brightnessCursor=e.getObjectByName("brightnesscursor"),this.objects.brightnessSlider=e.getObjectByName("brightness"),this.objects.brightnessSlider.geometry.computeBoundingBox(),this.objects.previousPage=e.getObjectByName("brushprev"),this.objects.nextPage=e.getObjectByName("brushnext"),this.objects.hueCursor=e.getObjectByName("huecursor"),this.objects.hueWheel=e.getObjectByName("hue"),this.objects.hueWheel.geometry.computeBoundingSphere(),this.colorWheelSize=this.objects.hueWheel.geometry.boundingSphere.radius,this.objects.sizeCursor=e.getObjectByName("size"),this.objects.sizeCursor.position.copy(this.cursorOffset),this.objects.colorHistory=[];for(var i=0;i<7;i++)this.objects.colorHistory[i]=e.getObjectByName("colorhistory"+i);this.objects.currentColor=e.getObjectByName("currentcolor"),this.objects.sizeSlider=e.getObjectByName("sizebg"),this.objects.sizeSlider.geometry.computeBoundingBox(),e.getObjectByName("bb").material=new THREE.MeshBasicMaterial({color:2395940,alphaTest:0,visible:!1});var s=this;this.messagesMaterial=new THREE.MeshBasicMaterial({map:null,transparent:!0,opacity:0}),this.objects.messageSave=e.getObjectByName("msg_save"),this.objects.messageSave.material=this.messagesMaterial,this.objects.messageSave.visible=!1,this.objects.messageError=e.getObjectByName("msg_error"),this.objects.messageError.visible=!1,this.objects.messageError.material=this.messagesMaterial;var r="assets/images/messages.png";this.el.sceneEl.systems.material.loadTexture(r,{src:r},(function(t){var e=s.messagesMaterial;e.map=t,e.needsUpdate=!0})),this.el.setAttribute("animation__showmessage",{dur:500,property:"ui.opacity",from:0,to:1,startEvents:"showmessage"}),this.el.setAttribute("animation__hidemessage",{dur:500,delay:3e3,property:"ui.opacity",from:1,to:0,startEvents:"animationcomplete__showmessage"}),this.el.sceneEl.addEventListener("drawing-upload-completed",(function(t){a(s.objects.messageSave)})),this.el.sceneEl.addEventListener("drawing-upload-error",(function(t){a(s.objects.messageError)})),this.initColorWheel(),this.initColorHistory(),this.initBrushesMenu(),this.setCursorTransparency(),this.updateColorUI(this.el.getAttribute("brush").color),this.updateSizeSlider(this.el.getAttribute("brush").size)}function a(t){t.visible=!0,s.el.emit("showmessage")}},initBrushesMenu:function(){var t=this.objects.previousPage,e=this.objects.nextPage,i=Object.keys(AFRAME.BRUSHES);this.initHighlightMaterial(e),this.initHighlightMaterial(t),t.visible=!1,e.visible=!1,this.brushesPerPage=15,this.brushesPagesNum=Math.ceil(i.length/this.brushesPerPage),this.brushesPage=0,this.loadBrushes(this.brushesPage,this.brushesPerPage)},setCursorTransparency:function(){var t=this.objects.hueCursor,e=this.objects.brightnessCursor,i=this.objects.sizeCursor;i.material.alphaTest=.5,t.material.alphaTest=.5,e.material.alphaTest=.5,i.material.transparent=!0,t.material.transparent=!0,e.material.transparent=!0},loadBrushes:(r={},function(t,e){var i,s,a=0,n=this.uiEl.getObject3D("mesh"),o=Object.keys(AFRAME.BRUSHES),h=this;if(!(t<0||t>=this.brushesPagesNum))for(this.objects.previousPage.visible=0!==t,t===this.brushesPagesNum-1?this.objects.nextPage.visible=!1:this.objects.nextPage.visible=!0,s=0;s<e;s++)u(i=o[t*e+s],a,i&&AFRAME.BRUSHES[i].prototype.options.thumbnail),a+=1;function u(t,e,i){var s=t?(t.charAt(0).toUpperCase()+t.slice(1)).toLowerCase():void 0;function a(t){var i=n.getObjectByName("brush"+e);h.brushButtonsMapping["brush"+e]=s,function(t,e){var i=h.brushButtonsMapping[e.name],s=r[i]||new THREE.MeshBasicMaterial;t?(s.map=t,s.alphaTest=.5,s.transparent=!0):r[i]||(s.visible=!1),r[i]=s,h.highlightMaterials[e.name]={normal:s,hover:s,pressed:s,selected:s},e.material=s}(t,i)}!i||r[s]?a():h.el.sceneEl.systems.material.loadTexture(i,{src:i},a)}}),nextPage:function(){this.brushesPage>=this.brushesPagesNum-1||(this.brushesPage++,this.loadBrushes(this.brushesPage,this.brushesPerPage),this.playSound("ui_click1"))},previousPage:function(){0!==this.brushesPage&&(this.brushesPage--,this.loadBrushes(this.brushesPage,this.brushesPerPage),this.playSound("ui_click1"))},initHighlightMaterial:function(t){var e=t.name,i=this.brushRegexp.test(e),s=-1!==e.indexOf("history"),r="hue"===e||"huecursor"===e,a={normal:t.material,hover:t.material,pressed:t.material,selected:t.material};i||s||r||(a.normal=t.material,a.hover=t.material.clone(),a.hover.map=this.system.hoverTexture,a.selected=t.material.clone(),a.selected.map=this.system.pressedTexture,a.pressed=t.material.clone(),a.pressed.map=this.system.pressedTexture),this.highlightMaterials[e]=a},toggleMenu:function(t){this.closed?(this.system.closeAll(),this.open(),this.system.opened=this.el):(this.close(),this.system.opened=void 0)},open:function(){var t=this.uiEl;if(this.closed){if(this.uiEl.setAttribute("visible",!0),this.uiEl.setAttribute("animation",{dur:100,easing:"easeOutExpo",property:"scale",from:{x:0,y:0,z:0},to:{x:1,y:1,z:1}}),this.el.setAttribute("brush","enabled",!1),this.rayEl.setAttribute("visible",!1),this.closed=!1,this.tooltips){var e=this;this.tooltips.forEach((function(i){i.getAttribute("visible")&&t.parentEl.id!==i.parentEl.id&&(e.isTooltipPaused=!0,i.setAttribute("visible",!1))}))}this.playSound("ui_menu")}},updateIntersections:function(){var t=this.raycaster=new THREE.Raycaster;return function(e){this.updateRaycaster(t),this.intersectedObjects=t.intersectObjects(this.menuEls,!0)}}(),onIntersection:function(t){var e=this.closed&&this.system.opened;this.el.components.brush.active||(this.rayEl.setAttribute("visible",!!e),this.el.setAttribute("brush","enabled",!1))},onIntersected:function(t){var e=t.detail.el;e.components.ui&&(this.handEl&&this.removeHandListeners(),this.handEl=e,this.handRayEl=this.handEl.components.ui.rayEl,this.menuEls=this.uiEl.object3D.children,this.syncUI(),this.addHandListeners())},addHandListeners:function(){var t=this.handEl;t.addEventListener("componentchanged",this.onComponentChanged),t.addEventListener("stroke-started",this.onStrokeStarted),t.addEventListener("triggerchanged",this.onTriggerChanged)},removeHandListeners:function(){var t=this.handEl;t.removeEventListener("componentchanged",this.onComponentChanged),t.removeEventListener("stroke-started",this.onStrokeStarted),t.removeEventListener("triggerchanged",this.onTriggerChanged)},onComponentChanged:function(t){"brush"===t.detail.name&&this.syncUI()},syncUI:function(){var t;this.handEl&&this.objects&&(t=this.handEl.getAttribute("brush"),this.updateSizeSlider(t.size),this.updateColorUI(t.color),this.updateColorHistory())},initColorHistory:function(){for(var t,e=this.objects.currentColor,i=0;i<this.objects.colorHistory.length;i++)(t=this.objects.colorHistory[i]).material=t.material.clone(),t.material.map=this.system.selectedTexture;e.material=e.material.clone(),e.material.map=this.system.selectedTexture,this.updateColorHistory()},updateColorHistory:function(){var t=this.handEl&&this.handEl.getAttribute("brush").color,e=this.colorStack;t||(t=this.el.components.brush.schema.color.default),this.objects.currentColor.material.color.set(t);for(var i=0;i<e.length;i++)t=e[e.length-i-1],this.objects.colorHistory[i].material.color.set(t)},updateSizeSlider:function(t){var e=this.objects.sizeSlider.geometry.boundingBox,i=this.objects.sizeCursor,s=e.max.x-e.min.x,r=t/AFRAME.components.brush.schema.size.max,a=r*s;i.position.setX(a-this.cursorOffset.x);var n=r+.3;i.scale.set(n,1,n)},updateColorUI:function(t){var e=new THREE.Color(t),i=this.hsv=this.rgb2hsv(e.r,e.g,e.b),s=2*i.h*Math.PI,r=i.s*this.colorWheelSize,a=r*Math.cos(s),n=r*Math.sin(s);this.objects.hueCursor.position.setX(a),this.objects.hueCursor.position.setZ(-n),this.objects.hueWheel.material.uniforms.brightness.value=this.hsv.v,this.objects.brightnessCursor.rotation.y=1.5*this.hsv.v-1.5},updateBrushSelector:function(t){var e=this,i=Object.keys(this.brushButtonsMapping),s=this.brushButtonsMapping;i.forEach((function(i){s[i]===t&&e.selectBrushButton(i)}))},onIntersectionCleared:function(){this.checkMenuIntersections=!1,this.rayEl.setAttribute("visible",!1),this.el.setAttribute("brush","enabled",!0)},onIntersectedCleared:function(t){this.handEl&&this.handEl.removeEventListener("triggerchanged",this.onTriggerChanged)},onStrokeStarted:function(){var t,e=this.colorStack;this.colorHasChanged&&(t=this.handEl.getAttribute("brush").color,this.colorHasChanged=!1,7===e.length&&e.shift(),e.push(t),this.syncUI())},updateRaycaster:(t=new THREE.Vector3,e=new THREE.Quaternion,i=new THREE.Vector3,s=new THREE.Vector3,function(r){var a=this.handEl.object3D;a.updateMatrixWorld(),a.matrixWorld.decompose(s,e,i),t.set(0,0,-1),t.applyAxisAngle(new THREE.Vector3(1,0,0),-this.rayAngle/360*2*Math.PI),t.applyQuaternion(e),r.far=this.rayDistance,r.set(s,t)}),close:function(){this.closed||(this.uiEl.setAttribute("animation",{dur:100,easing:"easeOutExpo",property:"scale",from:{x:1,y:1,z:1},to:{x:0,y:0,z:0}}),this.el.setAttribute("brush","enabled",!0),this.closed=!0,this.tooltips&&this.isTooltipPaused&&(this.isTooltipPaused=!1,this.tooltips.forEach((function(t){t.setAttribute("visible",!0)}))),this.playSound("ui_menu"))},playSound:function(t,e){void 0!==e&&this.pressedObjects[e]||document.getElementById(t).play()}})},821:()=>{window.addEventListener("load",(function(t){var e=document.body;e.addEventListener("dragover",(function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}),!1),e.addEventListener("drop",(function(t){t.stopPropagation(),t.preventDefault();for(var e=t.dataTransfer.files,i=0;i<e.length;i++){var s=e[i];if(".apa"===s.name.substring(s.name.length-4).toLowerCase())(r=new FileReader).onload=function(t){document.querySelector("a-scene").systems.brush.loadBinary(t.target.result)},r.readAsArrayBuffer(s);else if(".json"===s.name.substring(s.name.length-5).toLowerCase()){var r;(r=new FileReader).onload=function(t){document.querySelector("a-scene").systems.brush.loadJSON(JSON.parse(t.target.result))},r.readAsText(s)}else".obj"===s.name.substring(s.name.length-4).toLowerCase()?((r=new FileReader).onload=function(t){for(var e=(new AFRAME.THREE.OBJLoader).parse(t.target.result),i=document.createElement("a-entity"),s=0;s<e.children.length;s++){var r=e.children[s];r.material.constructor===Array?r.material.forEach((t=>{t.color.set("#333")})):r.material.color.set("#333")}i.setObject3D("mesh",e),i.className="templateitem",document.querySelector("a-scene").appendChild(i)},r.readAsText(s)):s.type.match(/image.*/)&&((r=new FileReader).onload=function(t){var e=new Image;e.src=t.target.result,e.onload=()=>{var i,s;e.width>e.height?(i=1,s=e.height/e.width):(s=1,i=e.width/e.height);var r=[3*Math.random()-1.5,1+Math.random()-.5,.2*Math.random()-1.4],a=document.createElement("a-image");a.setAttribute("src",t.target.result),a.setAttribute("position",r.join(" ")),a.setAttribute("width",i),a.setAttribute("height",s),a.className="templateitem",document.querySelector("a-scene").appendChild(a)}},r.readAsDataURL(s))}}),!1)}))},51:t=>{t.exports=function(t){const e=document.querySelector("a-scene");if(e&&e.hasLoaded)t();else{const e=function(i){"A-SCENE"===i.target.tagName&&(t(),document.removeEventListener("renderstart",e))};document.addEventListener("renderstart",e)}}},115:t=>{function e(t){this.material=t,this.maxBufferSize=1e6,this.geometries=[],this.current=null,this.strip=!0,this.addBuffer(!1)}e.prototype={restartPrimitive:function(){if(this.idx.position>=this.current.attributes.position.count)this.addBuffer(!1);else if(0!==this.idx.position){var t=3*(this.idx.position-1),e=this.current.attributes.position.array;this.addVertex(e[t++],e[t++],e[t++]),this.idx.color++,this.idx.normal++,this.idx.uv++}},remove:function(t,e){var i=this.current.attributes.position.array;if(this.idx.position>e.position)for(key in this.idx)for(var s="uv"===key?2:3,r=(i=t[key]*s,(e[key]+1)*s),a=this.idx[key]*s,n=r;n<a;n++)this.current.attributes[key].array[i++]=this.current.attributes[key].array[n];for(key in this.idx){var o=e[key]-t[key];this.idx[key]-=o}this.update()},undo:function(t){for(let e=t.position;e<this.idx.position;e++)this.current.attributes.position.setXYZ(e,0,0,0),this.current.index.setXYZ(e,0,0,0);this.idx=t,this.update()},addBuffer:function(t){var e=new THREE.BufferGeometry,i=new Float32Array(3*this.maxBufferSize),s=new Uint32Array(4.5*this.maxBufferSize),r=new Float32Array(3*this.maxBufferSize),a=new Float32Array(2*this.maxBufferSize),n=new Float32Array(3*this.maxBufferSize),o=new THREE.Mesh(e,this.material);o.frustumCulled=!1,o.vertices=i,this.object3D=new THREE.Object3D;var h=document.querySelector(".a-drawing");if(h||((h=document.createElement("a-entity")).className="a-drawing",document.querySelector("a-scene").appendChild(h)),h.object3D.add(this.object3D),this.object3D.add(o),e.setDrawRange(0,0),e.setAttribute("position",new THREE.BufferAttribute(i,3).setUsage(THREE.DynamicDrawUsage)),e.setIndex(new THREE.BufferAttribute(s,3).setUsage(THREE.DynamicDrawUsage)),e.setAttribute("uv",new THREE.BufferAttribute(a,2).setUsage(THREE.DynamicDrawUsage)),e.setAttribute("normal",new THREE.BufferAttribute(r,3).setUsage(THREE.DynamicDrawUsage)),e.setAttribute("color",new THREE.BufferAttribute(n,3).setUsage(THREE.DynamicDrawUsage)),this.previous=null,this.geometries.length>0&&(this.previous=this.current),this.idx={position:0,uv:0,normal:0,color:0},this.geometries.push(e),this.current=e,this.previous&&t){var u=3*(this.maxBufferSize-2),l=3*(this.maxBufferSize-2),d=(this.maxBufferSize,3*(this.maxBufferSize-2)),c=this.previous.attributes.position.array;this.addVertex(c[u++],c[u++],c[u++]),this.addVertex(c[u++],c[u++],c[u++]);var m=this.previous.attributes.normal.array;this.addNormal(m[d++],m[d++],m[d++]),this.addNormal(m[d++],m[d++],m[d++]);var p=this.previous.attributes.color.array;this.addColor(p[l++],p[l++],p[l++]),this.addColor(p[l++],p[l++],p[l++]);a=this.previous.attributes.uv.array}},addColor:function(t,e,i){this.current.attributes.color.setXYZ(this.idx.color++,t,e,i)},addNormal:function(t,e,i){this.current.attributes.normal.setXYZ(this.idx.normal++,t,e,i)},addVertex:function(t,e,i){var s=this.current.attributes.position;this.idx.position===s.count&&(this.addBuffer(!0),s=this.current.attributes.position),s.setXYZ(this.idx.position++,t,e,i),this.strip?(this.idx.position+1)%2==0&&this.idx.position>1&&(this.current.index.setXYZ(this.idx.position-3,this.idx.position-3,this.idx.position-2,this.idx.position-1),this.current.index.setXYZ(this.idx.position-2,this.idx.position-1,this.idx.position-2,this.idx.position)):(this.idx.position+1)%3==0&&this.current.index.setXYZ(this.idx.position,this.idx.position-2,this.idx.position-1,this.idx.position)},addUV:function(t,e){this.current.attributes.uv.setXY(this.idx.uv++,t,e)},update:function(){this.current.setDrawRange(0,3*this.idx.position-4),0===this.current.attributes.color.updateRanges.length&&this.current.attributes.color.addUpdateRange(0,0),this.current.attributes.color.updateRanges[0].count=3*this.idx.position,this.current.attributes.color.needsUpdate=!0,0===this.current.attributes.normal.updateRanges.length&&this.current.attributes.normal.addUpdateRange(0,0),this.current.attributes.normal.updateRanges[0].count=3*this.idx.position,this.current.attributes.normal.needsUpdate=!0,0===this.current.attributes.position.updateRanges.length&&this.current.attributes.position.addUpdateRange(0,0),this.current.attributes.position.updateRanges[0].count=3*this.idx.position,this.current.attributes.position.needsUpdate=!0,0===this.current.attributes.uv.updateRanges.length&&this.current.attributes.uv.addUpdateRange(0,0),this.current.attributes.uv.updateRanges[0].count=2*this.idx.position,this.current.attributes.uv.needsUpdate=!0,0===this.current.index.updateRanges.length&&this.current.index.addUpdateRange(0,0),this.current.index.updateRanges[0].count=3*this.idx.position,this.current.index.needsUpdate=!0}},t.exports=e},297:(t,e,i)=>{var s=i(115);function r(){this.sharedBuffers={}}r.prototype={addSharedBuffer:function(t,e){var i=new s(e);this.sharedBuffers[t]=i},getSharedBuffer:function(t){return this.sharedBuffers[t]}},t.exports=new r},796:()=>{AFRAME.BRUSHES={},APAINTER_STATS={brushes:{}},AFRAME.registerBrush=function(t,e,i){var s={};if(Object.keys(e).forEach((function(t){s[t]={value:e[t],writable:!0}})),AFRAME.BRUSHES[t])throw new Error("The brush `"+t+"` has been already registered. Check that you are not loading two versions of the same brush or two different brushes of the same name.");var r=function(){};r.prototype={options:Object.assign({spacing:0,maxPoints:0},i),reset:function(){},tick:function(t,e){},undo:function(){},remove:function(){},addPoint:function(t,e,i,s,r){},getJSON:function(t){for(var e=[],i=0;i<this.data.points.length;i++){var s=this.data.points[i];e.push({orientation:Utils.arrayNumbersToFixed(s.orientation.toArray()),position:Utils.arrayNumbersToFixed(s.position.toArray()),pressure:Utils.numberToFixed(s.pressure),timestamp:s.timestamp})}return{brush:{index:t.getUsedBrushes().indexOf(this.brushName),color:Utils.arrayNumbersToFixed(this.data.color.toArray()),size:Utils.numberToFixed(this.data.size)},points:e}},getBinary:function(t){var e=21+36*this.data.points.length,i=new BinaryManager(new ArrayBuffer(e));i.writeUint8(t.getUsedBrushes().indexOf(this.brushName)),i.writeColor(this.data.color),i.writeFloat32(this.data.size),i.writeUint32(this.data.points.length);for(var s=0;s<this.data.points.length;s++){var r=this.data.points[s];i.writeFloat32Array(r.position.toArray()),i.writeFloat32Array(r.orientation.toArray()),i.writeFloat32(r.pressure),i.writeUint32(r.timestamp)}return i.getDataView()}};var a,n,o=function(){};return(o.prototype=Object.create(r.prototype,s)).brushName=t,o.prototype.constructor=o,o.prototype.init=(a=o.prototype.init,function(t,e,i,s){this.object3D=new THREE.Object3D,this.data={points:[],size:e,prevPosition:null,prevPointerPosition:null,numPoints:0,color:t.clone(),timestamp:s,owner:i},a.call(this,t,e)}),o.prototype.addPoint=(n=o.prototype.addPoint,function(t,e,i,s,r){this.data.prevPosition&&this.data.prevPosition.distanceTo(t)<=this.options.spacing||0!==this.options.maxPoints&&this.data.numPoints>=this.options.maxPoints||n.call(this,t,e,i,s,r)&&(this.data.numPoints++,this.data.points.push({position:t.clone(),orientation:e.clone(),pressure:s,timestamp:r}),this.data.prevPosition=t.clone(),this.data.prevPointerPosition=i.clone())}),AFRAME.BRUSHES[t]=o,o.used=!1,o},AFRAME.registerSystem("brush",{schema:{},brushes:{},strokes:[],getUsedBrushes:function(){return Object.keys(AFRAME.BRUSHES).filter((function(t){return AFRAME.BRUSHES[t].used}))},getBrushByName:function(t){return AFRAME.BRUSHES[t]},undo:function(t){var e;t=t||"local";for(var i=this.strokes.length-1;i>=0;i--)if(this.strokes[i].data.owner===t){e=this.strokes.splice(i,1)[0];break}e&&(e.undo(),document.querySelector(".a-drawing").emit("stroke-removed",{stroke:e}))},removeById:function(t){var e=this.strokes[1];if(console.log(e,this.strokes),e){for(var i=this.strokes.length-1;i>1;i--)if(stroke=this.strokes[i],e.sharedBuffer===stroke.sharedBuffer){for(key in console.log(">>>",stroke.prevIdx,"->",stroke.idx,"target",e.prevIdx,"->",e.idx),e.idx){var s=e.idx[key]-e.prevIdx[key];stroke.idx[key]-=s,stroke.prevIdx[key]-=s}console.log("<<<",stroke.idx,stroke.prevIdx)}this.strokes.splice(1,1)[0].remove()}},clear:function(t){t=t||"local";for(var e=this.strokes.length-1;e>=0;e--)if(this.strokes[e].data.owner===t){var i=this.strokes[e];i.undo(),document.querySelector(".a-drawing").emit("stroke-removed",{stroke:i})}Object.keys(AFRAME.BRUSHES).forEach((function(t){AFRAME.BRUSHES[t].used=!1})),this.strokes=[]},init:function(){this.version=1,this.clear()},tick:function(t,e){if(this.strokes.length)for(var i=0;i<this.strokes.length;i++)this.strokes[i].tick(t,e)},generateTestLines:function(){var t=Object.keys(AFRAME.BRUSHES);brushesNames2=["leaf1","fur2","star","squared-textured","flat","squared-textured","lines5"];var e=-.6*t.length/2;e=0;t.forEach((function(t){var i=new THREE.Color(Math.random(),Math.random(),Math.random()),s=this.addNewStroke(t,i,.5),r=document.querySelector("#left-hand");r.emit("stroke-started",{entity:r,stroke:s});for(var a=new THREE.Vector3(e,0,-2),n=new THREE.Vector3,o=0;o<4;o++){var h=new THREE.Quaternion;n.set(0,.75,.1);var u=new THREE.Euler(0,Math.PI,0);h.setFromEuler(u),a=a.add(n);var l=this.getPointerPosition(a,h);s.addPoint(a,h,l,1,0)}e+=.6}))},generateRandomStrokes:function(t){function e(){return 2*Math.random()-1}for(var i=document.querySelector("#left-hand"),s=Object.keys(AFRAME.BRUSHES),r=0;r<t;r++){var a=s[parseInt(13*Math.random())],n=new THREE.Color(Math.random(),Math.random(),Math.random()),o=.3*Math.random(),h=parseInt(500*Math.random()),u=this.addNewStroke(a,n,o);i.emit("stroke-started",{entity:i,stroke:u});for(var l=new THREE.Vector3(e(),e(),e()),d=new THREE.Vector3,c=new THREE.Quaternion,m=.2,p=0;p<h;p++){d.set(e(),e(),e()),d.multiplyScalar(e()/20),c.setFromUnitVectors(l.clone().normalize(),d.clone().normalize()),(l=l.add(d)).y<0&&(l.y=-l.y);(m+=1-2*Math.random())<0&&(m=.2),m>1&&(m=1);var f=this.getPointerPosition(l,c);u.addPoint(l,c,f,m,0)}}},addNewStroke:function(t,e,i,s,r){APAINTER_STATS.brushes[t]||(APAINTER_STATS.brushes[t]=0),APAINTER_STATS.brushes[t]++,s=s||"local",r=r||Date.now();var a=this.getBrushByName(t);if(!a){var n=Object.keys(AFRAME.BRUSHES)[0];a=AFRAME.BRUSHES[n],console.warn("Invalid brush name: `"+t+"` using `"+n+"`")}a.used=!0;var o=new a;o.brush=a,o.init(e,i,s,r),this.strokes.push(o);var h=document.querySelector(".a-drawing");return h||((h=document.createElement("a-entity")).className="a-drawing",document.querySelector("a-scene").appendChild(h)),o},getJSON:function(){var t={version:1,strokes:[],author:"",brushes:this.getUsedBrushes()};for(i=0;i<this.strokes.length;i++)t.strokes.push(this.strokes[i].getJSON(this));return t},getBinary:function(){var t=[],e="apainter",i=this.getUsedBrushes(),s=e.length+i.join(" ").length+9,r=new BinaryManager(new ArrayBuffer(s));r.writeString(e),r.writeUint16(1),r.writeUint8(i.length);for(var a=0;a<i.length;a++)r.writeString(i[a]);for(r.writeUint32(this.strokes.length),t.push(r.getDataView()),a=0;a<this.strokes.length;a++)t.push(this.strokes[a].getBinary(this));return t},getPointerPosition:function(){const t={left:null,right:null};return window.addEventListener("model-loaded",(function(e){"left-tip"===e.target.id?(t.left=e.target.object3D,e.detail.model.traverse((function(e){"sizehint"===e.name&&(t.left=e)}))):"right-tip"===e.target.id&&(t.right=e.target.object3D,e.detail.model.traverse((function(e){"sizehint"===e.name&&(t.right=e)})))})),function(e,i,s){return"undfined"!=typeof s&&t[s]&&t[s].getWorldPosition(e),e}}(),loadJSON:function(t){1!==t.version&&console.error("Invalid version: ",t.version,"(Expected: 1)"),console.time("JSON Loading");for(var e=0;e<t.strokes.length;e++)for(var i=t.strokes[e],s=i.brush,r=this.addNewStroke(t.brushes[s.index],(new THREE.Color).fromArray(s.color),s.size),a=0;a<i.points.length;a++){var n=i.points[a],o=(new THREE.Vector3).fromArray(n.position),h=(new THREE.Quaternion).fromArray(n.orientation),u=n.pressure,l=n.timestamp,d=this.getPointerPosition(o,h);r.addPoint(o,h,d,u,l)}console.timeEnd("JSON Loading")},loadBinary:function(t){var e=new BinaryManager(t);if("apainter"===e.readString()){var i=e.readUint16();1!==i&&console.error("Invalid version: ",i,"(Expected: 1)"),console.time("Binary Loading");for(var s=e.readUint8(),r=[],a=0;a<s;a++)r.push(e.readString());for(var n=e.readUint32(),o=0;o<n;o++)for(var h=e.readUint8(),u=e.readColor(),l=e.readFloat(),d=e.readUint32(),c=this.addNewStroke(r[h],u,l),m=0;m<d;m++){var p=e.readVector3(),f=e.readQuaternion(),g=e.readFloat(),b=e.readUint32(),v=this.getPointerPosition(p,f);c.addPoint(p,f,v,g,b)}console.timeEnd("Binary Loading")}else console.error("Invalid `magic` header")},loadFromUrl:function(t,e){var i=new THREE.FileLoader(this.manager);i.crossOrigin="anonymous",!0===e&&i.setResponseType("arraybuffer");var s=this;i.load(t,(function(t){!0===e?s.loadBinary(t):s.loadJSON(JSON.parse(t))}))}})},810:(t,e,i)=>{var s=i(618).saveAs;AFRAME.registerSystem("painter",{init:function(){var t={behaviours:{},mappings:{painting:{common:{"grip.down":"undo","trigger.changed":"paint"},"vive-controls":{axismove:"changeBrushSizeInc","trackpad.touchstart":"startChangeBrushSize","menu.down":"toggleMenu","trackpad.down":"aim","trackpad.up":"teleport"},"oculus-touch-controls":{axismove:"changeBrushSizeAbs","abutton.down":"toggleMenu","xbutton.down":"toggleMenu","ybutton.down":"aim","ybutton.up":"teleport","bbutton.down":"aim","bbutton.up":"teleport"},"windows-motion-controls":{axismove:"changeBrushSizeAbs","menu.down":"toggleMenu","trackpad.down":"aim","trackpad.up":"teleport"}}}};this.sceneEl.addEventListener("loaded",(function(){AFRAME.registerInputMappings(t),AFRAME.currentInputMapping="painting"})),this.version="1.2",this.brushSystem=this.sceneEl.systems.brush,this.showTemplateItems=!0;var e=function(){var t,e=/\+/g,i=/([^&=]+)=?([^&]*)/g,s=function(t){return decodeURIComponent(t.replace(e," "))},r=window.location.search.substring(1),a={};for(t=i.exec(r);t;)a[s(t[1])]=s(t[2]),t=i.exec(r);return a}();const i=document.querySelector("a-camera, [camera]");if(e.url||e.urljson){var s=void 0===e.urljson;this.brushSystem.loadFromUrl(e.url||e.urljson,s),document.getElementById("logo")?.setAttribute("visible",!1),i.setAttribute("orbit-controls","initialPosition: 0 1.6 3"),document.getElementById("apainter-logo")?.classList.remove("hidden")}else i.setAttribute("position","0 1.6 0");void 0!==e.bgcolor&&(document.body.style.backgroundColor="#"+e.bgcolor),void 0!==e.sky&&this.sceneEl.addEventListener("loaded",(function(t){""===e.sky?document.getElementById("sky").setAttribute("visible",!1):document.getElementById("sky").setAttribute("material","src",e.sky)})),void 0!==e.floor&&this.sceneEl.addEventListener("loaded",(function(t){""===e.floor?document.getElementById("ground").setAttribute("visible",!1):document.getElementById("ground").setAttribute("material","src",e.floor)})),this.paintingStarted=!1;var r=this;document.addEventListener("stroke-started",(function(t){if(!r.paintingStarted){document.getElementById("logo")?.emit("painting-started"),r.paintingStarted=!0}})),document.addEventListener("keyup",(function(t){if(!t.shiftKey&&!t.ctrlKey){if(8===t.keyCode&&r.brushSystem.undo(),67===t.keyCode&&r.brushSystem.clear(),71===t.keyCode){var e=document.querySelector(".a-drawing");r.sceneEl.systems["gltf-exporter"].export(e)}if(78===t.keyCode){var i=document.querySelectorAll("[paint-controls]"),s=Object.keys(AFRAME.BRUSHES),a=s.indexOf(i[0].components.brush.data.brush);a=(a+1)%s.length,[].forEach.call(i,(function(t){t.setAttribute("brush","brush",s[a])}))}if(84===t.keyCode&&r.brushSystem.generateTestLines(),82===t.keyCode&&r.brushSystem.generateRandomStrokes(1),76===t.keyCode&&r.brushSystem.loadFromUrl("demo.apa",!0),85===t.keyCode&&r.upload(),86===t.keyCode&&r.save(),74===t.keyCode&&r.saveJSON(),79===t.keyCode){r.showTemplateItems=!r.showTemplateItems;for(var n=document.querySelectorAll(".templateitem"),o=0;o<n.length;o++)n[o].setAttribute("visible",r.showTemplateItems)}88===t.keyCode&&r.brushSystem.removeById(2)}})),console.info("A-PAINTER Version: "+this.version)},saveJSON:function(){var t=this.brushSystem.getJSON(),e=new Blob([JSON.stringify(t)],{type:"application/json"});s(e,"demo.json")},save:function(){var t=this.brushSystem.getBinary(),e=new Blob(t,{type:"application/octet-binary"});s(e,"demo.apa")},upload:function(){this.sceneEl.emit("drawing-upload-started");var t=this,e="https://aframe.io/a-painter/?url=",i=this.brushSystem.getBinary(),s=new Blob(i,{type:"application/octet-binary"});const r=new FormData;r.append("upload_preset","upload_painting"),r.append("file",s),fetch("https://api.cloudinary.com/v1_1/a-painter/upload",{method:"POST",body:r}).then((t=>{if(!t.ok)throw new Error(`Network request failed with status ${t.status}: ${t.statusText}`);return t.json()})).then((i=>{console.log("Uploaded link: ",e+i.secure_url),t.sceneEl.emit("drawing-upload-completed",{url:e+i.secure_url})})).catch((e=>{console.error(e),t.sceneEl.emit("drawing-upload-error",{errorInfo:e})}))}})},493:()=>{AFRAME.registerSystem("ui",{init:function(){this.initTextures()},initTextures:function(){var t=this,e="assets/images/ui-hover.png",i="assets/images/ui-pressed.png";this.sceneEl.systems.material.loadTexture(e,{src:e},(function(e){t.hoverTexture=e})),this.sceneEl.systems.material.loadTexture(i,{src:i},(function(e){t.pressedTexture=e}))},closeAll:function(){var t,e=document.querySelectorAll("[ui]");for(t=0;t<e.length;t++)e[t].components.ui.close()}})},369:()=>{window.addEventListener("load",(function(t){var e=document.getElementById("apainter-ui"),i=document.querySelector("#apainter-ui .share"),s=document.getElementById("apainter-share-url"),r=document.querySelector("#apainter-ui .progress"),a=document.querySelector("#apainter-ui .bar");document.addEventListener("drawing-upload-completed",(function(t){i.classList.remove("hide"),r.classList.add("hide"),s.value=t.detail.url})),document.addEventListener("drawing-upload-started",(function(t){e.style.display="block",i.classList.add("hide"),r.classList.remove("hide")})),document.addEventListener("drawing-upload-progress",(function(t){a.style.width=Math.floor(100*t.detail.progress)+"%"})),new Clipboard(".button.copy").on("error",(function(t){console.error("Error copying to clipboard:",t.action,t.trigger)}))}))},555:()=>{window.Utils=function(){function t(t){return parseFloat(t.toFixed(6))}return{numberToFixed:t,arrayNumbersToFixed:function(e){for(var i=0;i<e.length;i++)e[i]=t(e[i]);return e},getTooltips:function(t){var e;switch(t){case"windows-motion-samsung-controls":e=".windows-motion-samsung-tooltips";break;case"windows-motion-controls":e=".windows-motion-tooltips";break;case"oculus-touch-controls":e=".oculus-tooltips";break;case"vive-controls":e=".vive-tooltips"}return Array.prototype.slice.call(document.querySelectorAll(e))}}}()},618:function(t,e,i){var s,r=r||function(t){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,i=function(){return t.URL||t.webkitURL||t},s=e.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in s,a=/constructor/i.test(t.HTMLElement),n=/CriOS\/[\d]+/.test(navigator.userAgent),o=function(e){(t.setImmediate||t.setTimeout)((function(){throw e}),0)},h=function(t){setTimeout((function(){"string"==typeof t?i().revokeObjectURL(t):t.remove()}),4e4)},u=function(t,e,i){for(var s=(e=[].concat(e)).length;s--;){var r=t["on"+e[s]];if("function"==typeof r)try{r.call(t,i||t)}catch(t){o(t)}}},l=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},d=function(e,o,d){d||(e=l(e));var c,m=this,p="application/octet-stream"===e.type,f=function(){u(m,"writestart progress write writeend".split(" "))};if(m.readyState=m.INIT,r)return c=i().createObjectURL(e),void setTimeout((function(){s.href=c,s.download=o,function(t){var e=new MouseEvent("click");t.dispatchEvent(e)}(s),f(),h(c),m.readyState=m.DONE}));!function(){if((n||p&&a)&&t.FileReader){var s=new FileReader;return s.onloadend=function(){var e=n?s.result:s.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,m.readyState=m.DONE,f()},s.readAsDataURL(e),void(m.readyState=m.INIT)}(c||(c=i().createObjectURL(e)),p)?t.location.href=c:t.open(c,"_blank")||(t.location.href=c);m.readyState=m.DONE,f(),h(c)}()},c=d.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,i){return e=e||t.name||"download",i||(t=l(t)),navigator.msSaveOrOpenBlob(t,e)}:(c.abort=function(){},c.readyState=c.INIT=0,c.WRITING=1,c.DONE=2,c.error=c.onwritestart=c.onprogress=c.onwrite=c.onabort=c.onerror=c.onwriteend=null,function(t,e,i){return new d(t,e||t.name||"download",i)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */t.exports?t.exports.saveAs=r:null!==i.amdD&&null!==i.amdO&&(void 0===(s=function(){return r}.apply(e,[]))||(t.exports=s))},95:t=>{"use strict";t.exports=JSON.parse('{"meta":{"image":"brush_atlas.png","size":{"w":3584,"h":2944},"scale":"1"},"frames":{"stamp_grass.png":{"frame":{"x":0,"y":128,"w":1536,"h":512},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":1536,"h":512},"sourceSize":{"w":1536,"h":512}},"lines4.png":{"frame":{"x":0,"y":0,"w":2048,"h":128},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":2048,"h":128},"sourceSize":{"w":2048,"h":128}},"stamp_fur2.png":{"frame":{"x":0,"y":640,"w":1536,"h":512},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":1536,"h":512},"sourceSize":{"w":1536,"h":512}},"stamp_bush.png":{"frame":{"x":0,"y":1152,"w":1024,"h":512},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":1024,"h":512},"sourceSize":{"w":1024,"h":512}},"stamp_gear.png":{"frame":{"x":1024,"y":1152,"w":1024,"h":512},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":1024,"h":512},"sourceSize":{"w":1024,"h":512}},"stamp_fur1.png":{"frame":{"x":2048,"y":0,"w":1024,"h":512},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":1024,"h":512},"sourceSize":{"w":1024,"h":512}},"lines3.png":{"frame":{"x":2048,"y":512,"w":1024,"h":256},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":1024,"h":256},"sourceSize":{"w":1024,"h":256}},"line_gradient.png":{"frame":{"x":2048,"y":768,"w":1024,"h":256},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":1024,"h":256},"sourceSize":{"w":1024,"h":256}},"lines5.png":{"frame":{"x":2048,"y":1024,"w":1024,"h":256},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":1024,"h":256},"sourceSize":{"w":1024,"h":256}},"silky_flat.png":{"frame":{"x":2048,"y":1280,"w":1024,"h":256},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":1024,"h":256},"sourceSize":{"w":1024,"h":256}},"silky_textured.png":{"frame":{"x":0,"y":1664,"w":1024,"h":256},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":1024,"h":256},"sourceSize":{"w":1024,"h":256}},"squared_textured.png":{"frame":{"x":1024,"y":1664,"w":1024,"h":256},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":1024,"h":256},"sourceSize":{"w":1024,"h":256}},"line_grunge2.png":{"frame":{"x":2048,"y":1664,"w":1024,"h":256},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":1024,"h":256},"sourceSize":{"w":1024,"h":256}},"line_grunge3.png":{"frame":{"x":0,"y":1920,"w":1024,"h":256},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":1024,"h":256},"sourceSize":{"w":1024,"h":256}},"line_grunge1.png":{"frame":{"x":1024,"y":1920,"w":1024,"h":256},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":1024,"h":256},"sourceSize":{"w":1024,"h":256}},"lines2.png":{"frame":{"x":2048,"y":1920,"w":1024,"h":256},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":1024,"h":256},"sourceSize":{"w":1024,"h":256}},"stamp_leaf3.png":{"frame":{"x":1536,"y":128,"w":512,"h":512},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":512,"h":512},"sourceSize":{"w":512,"h":512}},"stamp_dots.png":{"frame":{"x":1536,"y":640,"w":512,"h":512},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":512,"h":512},"sourceSize":{"w":512,"h":512}},"thumb_stamp_star.png":{"frame":{"x":2304,"y":1536,"w":128,"h":128},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":128,"h":128},"sourceSize":{"w":128,"h":128}},"stamp_grunge1.png":{"frame":{"x":512,"y":2176,"w":512,"h":512},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":512,"h":512},"sourceSize":{"w":512,"h":512}},"stamp_grunge2.png":{"frame":{"x":1024,"y":2176,"w":512,"h":512},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":512,"h":512},"sourceSize":{"w":512,"h":512}},"stamp_grunge3.png":{"frame":{"x":1536,"y":2176,"w":512,"h":512},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":512,"h":512},"sourceSize":{"w":512,"h":512}},"stamp_grunge4.png":{"frame":{"x":2048,"y":2176,"w":512,"h":512},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":512,"h":512},"sourceSize":{"w":512,"h":512}},"stamp_grunge5.png":{"frame":{"x":2560,"y":2176,"w":512,"h":512},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":512,"h":512},"sourceSize":{"w":512,"h":512}},"stamp_leaf1.png":{"frame":{"x":3072,"y":0,"w":512,"h":512},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":512,"h":512},"sourceSize":{"w":512,"h":512}},"stamp_leaf2.png":{"frame":{"x":3072,"y":512,"w":512,"h":512},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":512,"h":512},"sourceSize":{"w":512,"h":512}},"stamp_column.png":{"frame":{"x":3072,"y":1024,"w":512,"h":512},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":512,"h":512},"sourceSize":{"w":512,"h":512}},"stamp_snow.png":{"frame":{"x":3072,"y":1536,"w":512,"h":512},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":512,"h":512},"sourceSize":{"w":512,"h":512}},"stamp_squares.png":{"frame":{"x":3072,"y":2048,"w":512,"h":512},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":512,"h":512},"sourceSize":{"w":512,"h":512}},"lines1.png":{"frame":{"x":0,"y":2688,"w":256,"h":256},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":256,"h":256},"sourceSize":{"w":256,"h":256}},"thumb_rainbow.png":{"frame":{"x":3072,"y":2560,"w":128,"h":128},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":128,"h":128},"sourceSize":{"w":128,"h":128}},"thumb_single_sphere.png":{"frame":{"x":3200,"y":2560,"w":128,"h":128},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":128,"h":128},"sourceSize":{"w":128,"h":128}},"thumb_stamp_fur1.png":{"frame":{"x":3328,"y":2560,"w":128,"h":128},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":128,"h":128},"sourceSize":{"w":128,"h":128}},"thumb_stamp_fur2.png":{"frame":{"x":3456,"y":2560,"w":128,"h":128},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":128,"h":128},"sourceSize":{"w":128,"h":128}},"thumb_stamp_grass.png":{"frame":{"x":2048,"y":1536,"w":128,"h":128},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":128,"h":128},"sourceSize":{"w":128,"h":128}},"thumb_stamp_snow.png":{"frame":{"x":2176,"y":1536,"w":128,"h":128},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":128,"h":128},"sourceSize":{"w":128,"h":128}},"stamp_star.png":{"frame":{"x":0,"y":2176,"w":512,"h":512},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":512,"h":512},"sourceSize":{"w":512,"h":512}}}}')}},e={};function s(i){var r=e[i];if(void 0!==r)return r.exports;var a=e[i]={exports:{}};return t[i].call(a.exports,a,a.exports,s),a.exports}s.amdD=function(){throw new Error("define cannot be used indirect")},s.amdO={},window.saveAs=s(618).saveAs,s(453),s(821),s(967),s(297),s(115),s(555),s(369),s(796),s(493),s(810),s(620),s(142),s(510),s(101),s(688),s(579),s(788),s(295),s(623),s(988),s(830),s(775),s(891)})();